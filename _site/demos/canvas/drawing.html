<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0"><title>Drawing</title><style>*{margin:0;padding:0}ul{list-style:none}a{text-decoration:none}.c-fix:after{content:"";display:block;height:0;clear:both;visibility:hidden}.c-fix{zoom:1;display:block}.canvas{position:fixed;width:100%;height:100%}.control{padding:30px;width:100%;position:fixed;top:0;left:0;box-sizing:border-box}.type ul{margin:-5px -7px}.type li{float:left;margin:5px 7px}.type a{line-height:30px;padding:0 15px;border-radius:3px;display:inline-block;font-size:20px;color:#F3F0F0;text-shadow:0 0 1px #333;background-color:#AFAFAF;border:1px solid #989898}.style{margin-top:20px}.style li{float:left;width:100%;margin:7px 0}.style input,.style span{display:inline-block;vertical-align:middle;line-height:24px}.style input{font-size:12px;padding:0 5px;width:150px;outline:0}.style span{font-size:14px;color:#666;padding-right:10px;width:90px}</style></head><body><canvas class="canvas"></canvas><div class="control js_control"><div class="type js_btn"><ul class="c-fix"><li><a href="javascript:;" class="js_solid" data-ctrl="true">Solid</a></li><li><a href="javascript:;" class="js_arc" data-ctrl="true">Arc</a></li><li><a href="javascript:;" class="js_rect" data-ctrl="true">Rect</a></li><li><a href="javascript:;" class="js_random" data-ctrl="true">Random</a></li><li><a href="javascript:;" class="js_clear" data-ctrl="true">Clear</a></li></ul></div><div class="style"><ul class="c-fix"><li><span>LineWidth</span><input type="text" class="js_line_width" placeholder="2" data-ctrl="true"></li><li><span>FillColor</span><input type="text" class="js_fill_style" placeholder="lightblue" data-ctrl="true"></li><li><span>BorderColor</span><input type="text" class="js_stroke_style" placeholder="blueviolet" data-ctrl="true"></li></ul></div></div><script src="https://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script><script src="https://cdn.bootcss.com/touchjs/0.2.14/touch.min.js"></script><script>var sketch={canvas:null,context:null,canvasData:null,type:"js_solid",coordinate:{startX:0,startY:0,endX:0,endY:0},init:function(){var t=this;t.initCanvas(),t.initContext(),t.ctrlBoard(),t.ctrlOptions(),t.drawingEvent()},initCanvas:function(){var t=this,n=$(".canvas").get(0),a=n.getContext("2d"),e=window.devicePixelRatio||1;n.width=n.offsetWidth*e,n.height=n.offsetHeight*e,a.scale(e,e),t.canvas=n,t.context=a},initContext:function(){var t=this,n=$(".js_line_width").val()||2,a=$(".js_fill_style").val()||"lightblue",e=$(".js_stroke_style").val()||"blueviolet";t.context.lineWidth=n,t.context.fillStyle=a,t.context.strokeStyle=e},ctrlBoard:function(){var t=$("body"),n=$(".js_control");t.on("click",function(t){var a=t.pageY,e=$(t.target),o=e.data("ctrl");a<20?n.slideDown():o||n.slideUp("fast")})},ctrlOptions:function(){var t=this,n=$(".js_btn");n.on("click","a",function(n){var a=$(n.target),e=a.attr("class");"js_clear"==e?t.clearCanvas():t.type=e})},drawingEvent:function(){var t=this,n=!1,a=$(t.canvas),e=t.canvas.width,o=t.canvas.height,c={js_solid:t.drawSolid,js_arc:t.drawArc,js_rect:t.drawRect,js_random:t.drawRandom},i=function(a){t.coordinate.startX=a.pageX,t.coordinate.startY=a.pageY,n=!0,t.initContext(),t.context.beginPath()},r=function(){n=!1,t.canvasData=t.context.getImageData(0,0,e,o)},s=function(a){t.coordinate.endX=a.pageX,t.coordinate.endY=a.pageY,n&&("js_random"!=t.type&&t.context.clearRect(0,0,e,o),t.canvasData&&t.context.putImageData(t.canvasData,0,0),c[t.type](t.coordinate,t),t.context.stroke())};a.on({mousedown:function(t){i(t)},touchstart:function(t){i(t.originalEvent.touches[0])}}),a.on({mouseup:function(){r()},touchend:function(){r()}}),a.on({mousemove:function(t){s(t)},touchmove:function(t){s(t.originalEvent.touches[0])}})},clearCanvas:function(){var t=this,n=t.canvas.width,a=t.canvas.height;t.context.clearRect(0,0,n,a),t.canvasData=t.context.getImageData(0,0,n,a)},drawSolid:function(t,n){var a=n;a.context.beginPath(),a.context.moveTo(t.startX,t.startY),a.context.lineTo(t.endX,t.endY)},drawArc:function(t,n){var a=n,e=t.endX-t.startX,o=t.endY-t.startY,c=Math.sqrt(e*e+o*o);a.context.beginPath(),a.context.arc(t.startX,t.startY,c,0,2*Math.PI),a.context.fill()},drawRect:function(t,n){var a=n,e=t.endX-t.startX,o=t.endY-t.startY;a.context.beginPath(),a.context.rect(t.startX,t.startY,e,o),a.context.fill()},drawRandom:function(t,n){var a=n;a.context.lineTo(t.endX,t.endY)}};sketch.init()</script></body></html>